<template>
    <div class="parallax">
        <div class="columns">
            <div class="is-12 column has-text-centered">
                <h1 id="headline">
                    I bims 1 Parallax
                </h1>
            </div>
        </div>
        <div class="columns is-mobile is-multiline">
            <div class="column is-12">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium laudantium odio officia.
                    Accusantium deserunt eius, et facilis impedit ipsam similique totam veniam. Assumenda cum debitis
                    deserunt dicta doloremque enim et excepturi facilis fugiat illum inventore itaque iusto labore
                    laborum laudantium magni nemo nesciunt perferendis placeat possimus, quaerat quasi quod saepe
                    similique totam vel vero. Ab, accusantium aliquid atque blanditiis commodi, consequuntur cupiditate
                    eius error explicabo harum hic obcaecati pariatur placeat praesentium quis quisquam voluptas.
                    Accusamus architecto asperiores assumenda est, ex excepturi facere harum iste libero maiores minima
                    nemo provident. Autem eligendi explicabo id necessitatibus nulla odio, optio quae quaerat quis quos
                    sint vel, veniam voluptatum. Accusantium aliquid aperiam eaque, enim fugit magnam necessitatibus
                    pariatur praesentium tempore voluptate. Consectetur in minima totam! Alias amet architecto
                    aspernatur at aut autem cum cumque delectus dicta ea eligendi est explicabo facere facilis impedit
                    ipsam ipsum libero magni mollitia neque pariatur possimus quae quisquam quod quos rem, repellendus,
                    similique soluta totam ut vero voluptatem voluptatibus voluptatum! Accusamus alias aperiam aut
                    dolores et laudantium libero mollitia, odit quam ratione! A alias atque autem beatae corporis
                    cupiditate delectus dignissimos dolore eaque error explicabo fugit illum in iure magni maxime minus
                    non optio, quam quia, repellat reprehenderit rerum saepe tenetur ut, veniam vero voluptas! Alias,
                    amet distinctio eius eum, ex id ipsum magnam modi necessitatibus nesciunt numquam placeat possimus
                    recusandae reprehenderit, soluta? Adipisci amet, beatae cum cupiditate ea eius enim impedit
                    molestias natus optio qui quia saepe. Laborum nulla, velit. Asperiores, esse impedit iste qui
                    quisquam rerum tempore vel voluptatibus. Ad, assumenda commodi consectetur consequuntur debitis
                    deleniti dolores dolorum eaque earum esse eveniet facilis fuga id iusto laudantium libero magni
                    maxime neque non nulla numquam obcaecati officia optio pariatur quam quis reiciendis repellendus
                    sapiente ullam vero. Aliquam autem, cupiditate distinctio dolore doloremque dolorum eligendi, error
                    esse harum id illo in iste iusto magni neque nihil nisi nobis, nostrum obcaecati odio officia quasi
                    qui quidem quo quos repudiandae sequi sunt ullam veniam vitae! Ad, aliquid amet animi atque autem
                    beatae commodi dignissimos dolore ea et ex illum necessitatibus nihil officia omnis quibusdam
                    recusandae repellat tempora velit vitae. Ab, alias, animi at aut consectetur dolorem eveniet
                    exercitationem ipsam ipsum labore laboriosam perferendis quas quibusdam quis quisquam repudiandae
                    sequi sit ullam veritatis voluptates. Accusamus atque ipsa optio provident quia quisquam quod
                    reiciendis rerum tempora tenetur. A aperiam atque autem cumque eius esse et facilis fugit harum illo
                    incidunt iure laboriosam maxime nemo nihil nostrum placeat quam quibusdam quisquam repellendus rerum
                    sint sit soluta, vitae voluptas voluptatem voluptates voluptatum? Ab ad ducimus ipsam nobis qui
                    similique tempore. Architecto sunt totam veritatis voluptas. Aliquam animi deserunt eos explicabo
                    libero porro, quas quasi quisquam, quos, sed sit totam velit. Adipisci assumenda consequuntur enim
                    esse, nihil odit. Commodi corporis dignissimos ea esse fugiat illum iusto recusandae similique ullam
                    voluptates. Accusantium, architecto error fugit inventore ipsa obcaecati quia repellendus
                    reprehenderit sint soluta vel vero voluptate voluptatem. Ad blanditiis culpa dolorem ea
                    exercitationem explicabo labore, magnam mollitia nesciunt non officiis perspiciatis possimus quaerat
                    veritatis vero? Excepturi, veniam.
                </p>
            </div>
        </div>
        <div class="columns is-centered">
            <div class="is-12 column">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium laudantium odio officia.
                    Accusantium deserunt eius, et facilis impedit ipsam similique totam veniam. Assumenda cum debitis
                    deserunt dicta doloremque enim et excepturi facilis fugiat illum inventore itaque iusto labore
                    laborum laudantium magni nemo nesciunt perferendis placeat possimus, quaerat quasi quod saepe
                    similique totam vel vero. Ab, accusantium aliquid atque blanditiis commodi, consequuntur cupiditate
                    eius error explicabo harum hic obcaecati pariatur placeat praesentium quis quisquam voluptas.
                    Accusamus architecto asperiores assumenda est, ex excepturi facere harum iste libero maiores minima
                    nemo provident. Autem eligendi explicabo id necessitatibus nulla odio, optio quae quaerat quis quos
                    sint vel, veniam voluptatum. Accusantium aliquid aperiam eaque, enim fugit magnam necessitatibus
                    pariatur praesentium tempore voluptate. Consectetur in minima totam! Alias amet architecto
                    aspernatur at aut autem cum cumque delectus dicta ea eligendi est explicabo facere facilis impedit
                    ipsam ipsum libero magni mollitia neque pariatur possimus quae quisquam quod quos rem, repellendus,
                    similique soluta totam ut vero voluptatem voluptatibus voluptatum! Accusamus alias aperiam aut
                    dolores et laudantium libero mollitia, odit quam ratione! A alias atque autem beatae corporis
                    cupiditate delectus dignissimos dolore eaque error explicabo fugit illum in iure magni maxime minus
                    non optio, quam quia, repellat reprehenderit rerum saepe tenetur ut, veniam vero voluptas! Alias,
                    amet distinctio eius eum, ex id ipsum magnam modi necessitatibus nesciunt numquam placeat possimus
                    recusandae reprehenderit, soluta? Adipisci amet, beatae cum cupiditate ea eius enim impedit
                    molestias natus optio qui quia saepe. Laborum nulla, velit. Asperiores, esse impedit iste qui
                    quisquam rerum tempore vel voluptatibus. Ad, assumenda commodi consectetur consequuntur debitis
                    deleniti dolores dolorum eaque earum esse eveniet facilis fuga id iusto laudantium libero magni
                    maxime neque non nulla numquam obcaecati officia optio pariatur quam quis reiciendis repellendus
                    sapiente ullam vero. Aliquam autem, cupiditate distinctio dolore doloremque dolorum eligendi, error
                    esse harum id illo in iste iusto magni neque nihil nisi nobis, nostrum obcaecati odio officia quasi
                    qui quidem quo quos repudiandae sequi sunt ullam veniam vitae! Ad, aliquid amet animi atque autem
                    beatae commodi dignissimos dolore ea et ex illum necessitatibus nihil officia omnis quibusdam
                    recusandae repellat tempora velit vitae. Ab, alias, animi at aut consectetur dolorem eveniet
                    exercitationem ipsam ipsum labore laboriosam perferendis quas quibusdam quis quisquam repudiandae
                    sequi sit ullam veritatis voluptates. Accusamus atque ipsa optio provident quia quisquam quod
                    reiciendis rerum tempora tenetur. A aperiam atque autem cumque eius esse et facilis fugit harum illo
                    incidunt iure laboriosam maxime nemo nihil nostrum placeat quam quibusdam quisquam repellendus rerum
                    sint sit soluta, vitae voluptas voluptatem voluptates voluptatum? Ab ad ducimus ipsam nobis qui
                    similique tempore. Architecto sunt totam veritatis voluptas. Aliquam animi deserunt eos explicabo
                    libero porro, quas quasi quisquam, quos, sed sit totam velit. Adipisci assumenda consequuntur enim
                    esse, nihil odit. Commodi corporis dignissimos ea esse fugiat illum iusto recusandae similique ullam
                    voluptates. Accusantium, architecto error fugit inventore ipsa obcaecati quia repellendus
                    reprehenderit sint soluta vel vero voluptate voluptatem. Ad blanditiis culpa dolorem ea
                    exercitationem explicabo labore, magnam mollitia nesciunt non officiis perspiciatis possimus quaerat
                    veritatis vero? Excepturi, veniam.
                </p>
            </div>
        </div>
        <div class="columns is-centered">
            <div class="is-12 column">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium laudantium odio officia.
                    Accusantium deserunt eius, et facilis impedit ipsam similique totam veniam. Assumenda cum debitis
                    deserunt dicta doloremque enim et excepturi facilis fugiat illum inventore itaque iusto labore
                    laborum laudantium magni nemo nesciunt perferendis placeat possimus, quaerat quasi quod saepe
                    similique totam vel vero. Ab, accusantium aliquid atque blanditiis commodi, consequuntur cupiditate
                    eius error explicabo harum hic obcaecati pariatur placeat praesentium quis quisquam voluptas.
                    Accusamus architecto asperiores assumenda est, ex excepturi facere harum iste libero maiores minima
                    nemo provident. Autem eligendi explicabo id necessitatibus nulla odio, optio quae quaerat quis quos
                    sint vel, veniam voluptatum. Accusantium aliquid aperiam eaque, enim fugit magnam necessitatibus
                    pariatur praesentium tempore voluptate. Consectetur in minima totam! Alias amet architecto
                    aspernatur at aut autem cum cumque delectus dicta ea eligendi est explicabo facere facilis impedit
                    ipsam ipsum libero magni mollitia neque pariatur possimus quae quisquam quod quos rem, repellendus,
                    similique soluta totam ut vero voluptatem voluptatibus voluptatum! Accusamus alias aperiam aut
                    dolores et laudantium libero mollitia, odit quam ratione! A alias atque autem beatae corporis
                    cupiditate delectus dignissimos dolore eaque error explicabo fugit illum in iure magni maxime minus
                    non optio, quam quia, repellat reprehenderit rerum saepe tenetur ut, veniam vero voluptas! Alias,
                    amet distinctio eius eum, ex id ipsum magnam modi necessitatibus nesciunt numquam placeat possimus
                    recusandae reprehenderit, soluta? Adipisci amet, beatae cum cupiditate ea eius enim impedit
                    molestias natus optio qui quia saepe. Laborum nulla, velit. Asperiores, esse impedit iste qui
                    quisquam rerum tempore vel voluptatibus. Ad, assumenda commodi consectetur consequuntur debitis
                    deleniti dolores dolorum eaque earum esse eveniet facilis fuga id iusto laudantium libero magni
                    maxime neque non nulla numquam obcaecati officia optio pariatur quam quis reiciendis repellendus
                    sapiente ullam vero. Aliquam autem, cupiditate distinctio dolore doloremque dolorum eligendi, error
                    esse harum id illo in iste iusto magni neque nihil nisi nobis, nostrum obcaecati odio officia quasi
                    qui quidem quo quos repudiandae sequi sunt ullam veniam vitae! Ad, aliquid amet animi atque autem
                    beatae commodi dignissimos dolore ea et ex illum necessitatibus nihil officia omnis quibusdam
                    recusandae repellat tempora velit vitae. Ab, alias, animi at aut consectetur dolorem eveniet
                    exercitationem ipsam ipsum labore laboriosam perferendis quas quibusdam quis quisquam repudiandae
                    sequi sit ullam veritatis voluptates. Accusamus atque ipsa optio provident quia quisquam quod
                    reiciendis rerum tempora tenetur. A aperiam atque autem cumque eius esse et facilis fugit harum illo
                    incidunt iure laboriosam maxime nemo nihil nostrum placeat quam quibusdam quisquam repellendus rerum
                    sint sit soluta, vitae voluptas voluptatem voluptates voluptatum? Ab ad ducimus ipsam nobis qui
                    similique tempore. Architecto sunt totam veritatis voluptas. Aliquam animi deserunt eos explicabo
                    libero porro, quas quasi quisquam, quos, sed sit totam velit. Adipisci assumenda consequuntur enim
                    esse, nihil odit. Commodi corporis dignissimos ea esse fugiat illum iusto recusandae similique ullam
                    voluptates. Accusantium, architecto error fugit inventore ipsa obcaecati quia repellendus
                    reprehenderit sint soluta vel vero voluptate voluptatem. Ad blanditiis culpa dolorem ea
                    exercitationem explicabo labore, magnam mollitia nesciunt non officiis perspiciatis possimus quaerat
                    veritatis vero? Excepturi, veniam.
                </p>
            </div>
        </div>
        <div class="columns">
            <div class="is-12 column" id="pinned_wrapper">
                <div id="sky"></div>
                <div id="city"></div>
                <div id="skyline_wrapper">
                    <div id="skyline"></div>
                </div>
                <div id="walker"></div>
            </div>
        </div>
        <div class="columns is-centered">
            <div class="is-12 column">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium laudantium odio officia.
                    Accusantium deserunt eius, et facilis impedit ipsam similique totam veniam. Assumenda cum debitis
                    deserunt dicta doloremque enim et excepturi facilis fugiat illum inventore itaque iusto labore
                    laborum laudantium magni nemo nesciunt perferendis placeat possimus, quaerat quasi quod saepe
                    similique totam vel vero. Ab, accusantium aliquid atque blanditiis commodi, consequuntur cupiditate
                    eius error explicabo harum hic obcaecati pariatur placeat praesentium quis quisquam voluptas.
                    Accusamus architecto asperiores assumenda est, ex excepturi facere harum iste libero maiores minima
                    nemo provident. Autem eligendi explicabo id necessitatibus nulla odio, optio quae quaerat quis quos
                    sint vel, veniam voluptatum. Accusantium aliquid aperiam eaque, enim fugit magnam necessitatibus
                    pariatur praesentium tempore voluptate. Consectetur in minima totam! Alias amet architecto
                    aspernatur at aut autem cum cumque delectus dicta ea eligendi est explicabo facere facilis impedit
                    ipsam ipsum libero magni mollitia neque pariatur possimus quae quisquam quod quos rem, repellendus,
                    similique soluta totam ut vero voluptatem voluptatibus voluptatum! Accusamus alias aperiam aut
                    dolores et laudantium libero mollitia, odit quam ratione! A alias atque autem beatae corporis
                    cupiditate delectus dignissimos dolore eaque error explicabo fugit illum in iure magni maxime minus
                    non optio, quam quia, repellat reprehenderit rerum saepe tenetur ut, veniam vero voluptas! Alias,
                    amet distinctio eius eum, ex id ipsum magnam modi necessitatibus nesciunt numquam placeat possimus
                    recusandae reprehenderit, soluta? Adipisci amet, beatae cum cupiditate ea eius enim impedit
                    molestias natus optio qui quia saepe. Laborum nulla, velit. Asperiores, esse impedit iste qui
                    quisquam rerum tempore vel voluptatibus. Ad, assumenda commodi consectetur consequuntur debitis
                    deleniti dolores dolorum eaque earum esse eveniet facilis fuga id iusto laudantium libero magni
                    maxime neque non nulla numquam obcaecati officia optio pariatur quam quis reiciendis repellendus
                    sapiente ullam vero. Aliquam autem, cupiditate distinctio dolore doloremque dolorum eligendi, error
                    esse harum id illo in iste iusto magni neque nihil nisi nobis, nostrum obcaecati odio officia quasi
                    qui quidem quo quos repudiandae sequi sunt ullam veniam vitae! Ad, aliquid amet animi atque autem
                    beatae commodi dignissimos dolore ea et ex illum necessitatibus nihil officia omnis quibusdam
                    recusandae repellat tempora velit vitae. Ab, alias, animi at aut consectetur dolorem eveniet
                    exercitationem ipsam ipsum labore laboriosam perferendis quas quibusdam quis quisquam repudiandae
                    sequi sit ullam veritatis voluptates. Accusamus atque ipsa optio provident quia quisquam quod
                    reiciendis rerum tempora tenetur. A aperiam atque autem cumque eius esse et facilis fugit harum illo
                    incidunt iure laboriosam maxime nemo nihil nostrum placeat quam quibusdam quisquam repellendus rerum
                    sint sit soluta, vitae voluptas voluptatem voluptates voluptatum? Ab ad ducimus ipsam nobis qui
                    similique tempore. Architecto sunt totam veritatis voluptas. Aliquam animi deserunt eos explicabo
                    libero porro, quas quasi quisquam, quos, sed sit totam velit. Adipisci assumenda consequuntur enim
                    esse, nihil odit. Commodi corporis dignissimos ea esse fugiat illum iusto recusandae similique ullam
                    voluptates. Accusantium, architecto error fugit inventore ipsa obcaecati quia repellendus
                    reprehenderit sint soluta vel vero voluptate voluptatem. Ad blanditiis culpa dolorem ea
                    exercitationem explicabo labore, magnam mollitia nesciunt non officiis perspiciatis possimus quaerat
                    veritatis vero? Excepturi, veniam.
                </p>
            </div>
        </div>
    </div>
</template>

<script>
    import {TimelineMax, TweenMax} from 'gsap';
    import ScrollMagic from 'ScrollMagic';

    var animationGsap = require('ScrollMagic/scrollmagic/uncompressed/plugins/animation.gsap.js');
    var addIndicators = require('ScrollMagic/scrollmagic/uncompressed/plugins/debug.addIndicators.js');


    export default {
        name: "Parallax",
        data() {
            return {
                controller: new ScrollMagic.Controller(),
            }
        },
        methods: {
            fadeIn() {
                var tween = TweenMax.to('#headline', 0.5, {
                    opacity: 1,
                    y: 0,
                    ease: Circ.easeOut,
                });
            },


            pinContainer() {
                var scene = new ScrollMagic.Scene({
                    triggerElement: '#pinned_wrapper',
                    triggerHook: 'onCenter',
                    duration: 9920
                })
                    .setPin('#pinned_wrapper', {pushFollowers: true})
                    .addTo(this.controller);
            },

            walkIn() {
                var moveBackground = TweenMax.to('#walker', 1.0, {
                    backgroundPositionX: '100%',
                    ease: SteppedEase.config(6),
                });

                var moveForward = TweenMax.to('#walker', 1.0, {
                    x: 100,
                    ease: Power0.easeNone,
                });

                var walkIn = new ScrollMagic.Scene({
                    triggerElement: '#pinned_wrapper', duration: 200
                })
                    .addTo(this.controller)
                    .setTween([
                        moveBackground,
                        moveForward
                    ]);
            },
            backgroundWalkcycle() {
                var moveBackground = TweenMax.to('#city', 1, {
                    backgroundPositionX: '400%',
                    ease: Power0.easeNone,
                });

                var moveSkyline = TweenMax.to('#skyline', 1, {
                    backgroundPositionX: '-500px',
                    ease: Power0.easeNone,
                });


                var walkcycle = TweenMax.fromTo('#walker', 1,
                    {
                        backgroundPositionX: '0%',

                    },
                    {
                        backgroundPositionX: '100%',
                        ease: SteppedEase.config(6),
                        repeat: 20
                    }
                );

                var walkcycleScene = new ScrollMagic.Scene({
                    triggerElement: '#pinned_wrapper',
                    offset: 200,
                    duration: '9920px'
                })
                // .addIndicators({name: 'walkLoop'})
                    .setTween(walkcycle)
                    .addTo(this.controller);

                var backgroundScene = new ScrollMagic.Scene({
                    triggerElement: '#pinned_wrapper',
                    offset: 200,
                    duration: '9920px'
                })
                // .addIndicators({name: 'walkLoop'})
                    .setTween(moveBackground)
                    .addTo(this.controller);

                var skylineScene = new ScrollMagic.Scene({
                    triggerElement: '#pinned_wrapper',
                    offset: 200,
                    duration: 9920
                })
                // .addIndicators({name: 'walkLoop'})
                    .setTween(moveSkyline)
                    .addTo(this.controller);


            },
        },
        mounted() {
            this.fadeIn();
            this.pinContainer();
            this.walkIn();
            this.backgroundWalkcycle();
        },
        beforeDestroy() {
            this.controller.destroy(true);
        }
    }
</script>

<style scoped lang="scss">

    #headline {
        opacity: 0;
        transform: translateY(50px);
    }

    .column {
        padding: 0.75rem;
    }

    #pinned_wrapper {
        position: relative;
        width: 100%;
        height: 400px;

        #city {
            position: relative;
            width: 100%;
            height: 400px;
            background-image: url('../assets/img/background.png');
            background-repeat: repeat-x;
            background-size: cover;
            background-position-y: 23px;
            z-index: 10;
        }

        #sky {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 400px;
            background: linear-gradient(to bottom, rgb(155, 180, 223) 0%, rgb(221, 240, 252) 25%);
            background-repeat: no-repeat;
            background-position-y: -11px;
            z-index: 1;
        }

        #skyline_wrapper {
            position: absolute;
            top: -20%;
            left: 0;
            width: 100%;
            height: 400px;
            z-index: 5;

            #skyline{
                position: relative;
                width: 100%;
                height: 400px;
                background: url('../assets/img/skyline.png');
                background-repeat: repeat-x;
                background-size: contain;
                background-position-y: 44px;
                background-position-x: 0;
            }
        }

        #walker {
            background: url('../assets/img/walker.png') no-repeat 0% 0%;
            position: absolute;
            height: 190px;
            width: 250px;
            left: 0;
            top: 47%;
            transform: translateX(-200px);
            z-index: 15;
        }
    }

</style>